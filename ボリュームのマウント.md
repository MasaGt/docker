### ボリュームとは
PC(や外部記憶装である)のストレージの1領域を区切ったもの

### マウントとは
対象を接続して、osやソフトウェアの支配下に置くこと  
例: USBをPCに接続し、利用することは「USBをPCにマウントする」と言える

### ボリュームのマウントとは
PCのストレージの一領域区をゲストOSや仮想アプリに接続し、その一ストレージ領域を対象のOSやアプリが利用できるようにすること

---

### なぜボリュームのマウントをするのか
docker cp でファイルをコンテナに配置していっても、コンテナを削除した際にファイルごと消えてしまう。  
コンテナの基本的な考えてある「コンテナの使い捨て」より、新しくアップデートしたコンテナに切り替える際、データごと削除しない為には、ファイルをどこか他の場所に保存しておく必要がある。  
なので。ボリュームのマウントは必要である。

---

### ボリュームマウントとバインドマウント

#### ボリュームマウント
docker engine が管理している領域内にボリューム(記憶領域)を作成し、その領域ないボリュームをコンテナにマウントする。
- メリット

名前で指定して管理できるため、手軽に扱える

- デメリット

(ファイルエクスプローラーのように)直接的に操作しづらい

#### バインドマウント

PCのディレクトやフォルダをコンテナにマウントする  
ファイル単位でマウントできる

- メリット

直接的に操作できる(ファイルをドラッグアンドドロップで配置できたり)

- デメリット

環境依存によってうまくコンテナが動かないケースがあるかも知れない  
-> WindowsとLinuxでは、パスの指定方法が違ったりするので、その際にうまくマウント出来なかったりするかも。

---

### ボリュームマウントのコマンド
手順
1. **docker engine が管理している領域内にボリューム(記憶領域)を作成する**

        docker volume create [ボリューム名]
削除も同じようにvolumeコマンドで
        docker volume rm [ボリューム名]

2. **作成したボリュームをコンテナにマウントする**

        docker run -v [ボリューム名]:[コンテナの記憶領域パス] (以下省略)

### バインドマウントのコマンド
1. PCのフォルダ等をコンテナにマウントする
        docker run -v [フォルダなどのパス]:[コンテナの記憶領域パス] (以下省略)

### 注意点
- ボリュームのマウントはdocker run や docker container create時にしかできない
- コンテナの作成後に、ボリュームをマウントすることはできない  
- もし、コンテナ作成後にボリュームのマウントをしたかったら,

        1. そこまでのコンテナをイメージ化
        2. そのイメージからコンテナ作成 + ボリュームのマウントを指定

### 例
バンドマウント
```bash
# Macのユーザー直下のフォルダをhttpdコンテナにバインドマウントする
docker run -v /Users/<user名>/<対象フォルダ名>:/usr/local/apache2/htdocs httpd

#　マウントできているか確認
docker inspect <コンテナ名>
# "Mounts": [
#             {
#                 "Type": "bind",
#                 "Source": "/Users/<ユーザー名>/<対象フォルダ>",
#                 "Destination": "/usr/local/apache2/htdocs",
#                 "Mode": "",
#                 "RW": true,
#                 "Propagation": "rprivate"
#             }
#         ]
```

<br>

ボリュームマウント
```bash
# httpdコンテナにボリュームマウントする

# ボリュームの作成
docker volume create <ボリューム名>
docker run -v <ボリューム名>:usr/local/apache2/htdocs httpd

# マウント後はinspectコマンドで確認
docker inspect <コンテナ名>
# "Mounts": [
#             {
#                 "Type": "volume",
#                 "Name": "vol1",
#                 "Source": "/var/lib/docker/volumes/vol1/_data",
#                 "Destination": "/usr/local/apache2/htdocs",
#                 "Driver": "local",
#                 "Mode": "z",
#                 "RW": true,
#                 "Propagation": ""
#             }
#         ]
```


